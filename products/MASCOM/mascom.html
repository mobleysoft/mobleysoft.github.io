<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MASCOM Overview</title>
  <link rel="stylesheet" href="https://mobleysoft.com/styles/writeup.css">
</head>
<body>
  <script type="module">
    import { mascomTJI } from './mascomTJI.js';

    document.addEventListener('DOMContentLoaded', () => {
      const container = document.createElement('div');
      container.classList.add('tji-container');
      Object.entries(mascomTJI).forEach(([_, item]) => {
        try {
          const tagItem = item.find(e => e.startsWith('tag:'));
          const contentItem = item.find(e => e.startsWith('content:'));
          let element;
          if (tagItem && contentItem) {
            const tag = tagItem.split(':')[1];
            const content = contentItem.split(':')[1];
            element = document.createElement(tag);
            element.innerHTML = content;
          } else {
            element = document.createElement('div');
            element.classList.add('default-item');
            element.textContent = item.join(' | ');
          }
          const parentItem = item.find(e => e.startsWith('parent:'));
          if (parentItem) {
            const parentId = parentItem.split(':')[1];
            const parentElement = container.querySelector(`[data-id="${parentId}"]`);
            if (parentElement) {
              parentElement.appendChild(element);
            } else {
              console.warn(`Parent element with ID ${parentId} not found for item`, item);
              container.appendChild(element);
            }
          } else {
            const idItem = item.find(e => e.startsWith('id:'));
            if (idItem) {
              element.id = idItem.split(':')[1];
              element.setAttribute('data-id', element.id);
            }
            container.appendChild(element);
          }
        } catch (e) {
          console.error('Error processing item', item, e);
        }
      });
      document.body.appendChild(container);
    });
  </script>
</body>
</html>
